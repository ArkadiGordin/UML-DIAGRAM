@startuml

actor Пользователь
participant "Веб-сайт" as Website
participant "Корзина" as Cart
participant "Оплата" as Payment
participant "Служба доставки" as Delivery
participant "Служба возврата" as Return
participant "Доставщик" as Courier

Пользователь -> Website: Открывает сайт
Пользователь -> Website: Просматривает товары
Пользователь -> Website: Добавляет товар в корзину
Website -> Cart: Обновляет содержимое корзины

Пользователь -> Cart: Просматривает корзину
Пользователь -> Website: Оформляет заказ
Website -> Payment: Перенаправление на оплату
Payment -> Пользователь: Запрашивает данные карты
Пользователь -> Payment: Вводит данные карты
Payment -> Website: Подтверждение оплаты

Website -> Delivery: Отправка данных для доставки
Delivery -> Courier: Назначение доставщика
Courier -> Delivery: Подтверждение принятия заказа
Courier -> Пользователь: Оповещение о статусе доставки
Courier -> Delivery: Заказ доставлен
Delivery -> Пользователь: Подтверждение завершения доставки

...Позже...
Пользователь -> Return: Инициирует возврат товара
Return -> Пользователь: Подтверждение возврата

' Добавление классов, интерфейсов и наследования
package "Модели" {
  class Товар {
    - id: int
    - название: string
    - цена: float
    + getОписание(): string
    + getЦена(): float
  }
  class Корзина {
    - товары: List<Tовар>
    + добавитьТовар(товар: Товар): void
    + удалитьТовар(товар: Товар): void
    + очиститьКорзину(): void
  }
}

package "Платежная система" {
  interface ПлатежнаяСистема {
    + оплатить(сумма: float): boolean
  }
  class КредитнаяКарта implements ПлатежнаяСистема {
    + номерКарты: string
    + срокДействия: string
    + оплата(сумма: float): boolean
  }
  class PayPal implements ПлатежнаяСистема {
    + email: string
    + оплата(сумма: float): boolean
  }
}

package "Доставка" {
  abstract class Доставка {
    + рассчитатьСроки(): int
    + рассчитатьСтоимость(): float
  }
  class КурьерскаяДоставка extends Доставка {
    + рассчитатьСроки(): int
    + рассчитатьСтоимость(): float
  }
  class ПочтоваяДоставка extends Доставка {
    + рассчитатьСроки(): int
    + рассчитатьСтоимость(): float
  }
  class Доставщик {
    - id: int
    - имя: string
    + принятьЗаказ(заказ: Товар): void
    + обновитьСтатус(статус: string): void
  }
}

package "Возврат" {
  interface ПроцессВозврата {
    + инициироватьВозврат(): void
    + подтверждениеВозврата(): boolean
  }
  class ВозвратТовара implements ПроцессВозврата {
    + инициироватьВозврат(): void
    + подтверждениеВозврата(): boolean
  }
}

' Указание зависимости
Cart ..> Товар : содержит >
Пользователь --|> ВозвратТовара : инициирует >
Payment --> ПлатежнаяСистема : использует >
Delivery --> Доставка : использует >
Courier --> Доставка : работает с >

' Методы и доступ
Товар : - id : int
Товар : - название : string
Товар : - цена : float
Товар : + getОписание() : string
Товар : + getЦена() : float
Корзина : - товары : List<Tовар>
Корзина : + добавитьТовар(товар: Товар) : void
Корзина : + удалитьТовар(товар: Товар) : void
Корзина : + очиститьКорзину() : void

КредитнаяКарта : + номерКарты : string
КредитнаяКарта : + срокДействия : string
КредитнаяКарта : + оплатить(сумма: float) : boolean

PayPal : + email : string
PayPal : + оплата(сумма: float) : boolean

Доставка : + рассчитатьСроки() : int
Доставка : + рассчитатьСтоимость() : float

КурьерскаяДоставка : + рассчитатьСроки() : int
КурьерскаяДоставка : + рассчитатьСтоимость() : float

ПочтоваяДоставка : + рассчитатьСроки() : int
ПочтоваяДоставка : + рассчитатьСтоимость() : float

Доставщик : - id : int
Доставщик : - имя : string
Доставщик : + принятьЗаказ(заказ: Товар) : void
Доставщик : + обновитьСтатус(статус: string) : void

ВозвратТовара : + инициироватьВозврат() : void
ВозвратТовара : + подтверждениеВозврата() : boolean

' Примечания и шаблоны
note right of Пользователь
  Взаимодействие с сайтом
  и оформление заказа.
end note

note bottom of Корзина
  Добавление и удаление товаров
  из корзины покупок.
end note

' Истории для покупателей:
note top of Website
  1. Просмотр товаров
  2. Добавление товара в корзину
  3. Просмотр корзины
  4. Оформление заказа
  5. Ввод данных для оплаты
  6. Отслеживание статуса доставки
  7. Инициирование возврата товара
end note

' Истории для персонала:
note top of Delivery
  1. Управление товарами на складе
  2. Обработка заказов
  3. Назначение курьера для доставки
  4. Отправка уведомлений о доставке
  5. Обработка возвратов
  6. Проверка запасов товаров
  7. Управление качеством доставки
end note

@enduml
