@startuml

actor Пользователь
actor Доставщик
actor Поставщик
actor Администратор
actor Владелец

participant "Веб-сайт" as Website
participant "Корзина" as Cart
participant "Оплата" as Payment
participant "Служба доставки" as Delivery
participant "Служба возврата" as Return
participant "Доставщик" as Courier

' Истории пользователей
note right of Пользователь
  1. Как покупатель, я хочу иметь возможность просматривать каталог товаров, чтобы выбрать интересующие меня продукты.
  2. Как покупатель, я хочу добавлять выбранные товары в корзину, чтобы собрать все необходимые покупки перед оформлением заказа.
  3. Как покупатель, я хочу редактировать количество товаров в корзине, чтобы заказать нужное мне количество каждого продукта.
  4. Как покупатель, я хочу удалять товары из корзины, чтобы исключить ненужные позиции перед оформлением заказа.
  5. Как покупатель, я хочу иметь возможность выбирать способ доставки, чтобы получить товар наиболее удобным для меня способом.
  6. Как покупатель, я хочу выбирать способ оплаты, чтобы оплатить заказ наиболее удобным для меня способом.
  7. Как покупатель, я хочу получать уведомления о статусе моего заказа, чтобы быть в курсе этапов его обработки и доставки.
  8. Как покупатель, я хочу иметь возможность просматривать историю моих заказов, чтобы отслеживать предыдущие покупки и при необходимости повторять их.
  9. Как покупатель, я хочу оставлять отзывы о приобретенных товарах, чтобы поделиться своим опытом с другими покупателями.
  10. Как покупатель, я хочу иметь возможность инициировать возврат товара, чтобы вернуть или обменять неподходящий или дефектный продукт.
end note

' Истории доставщика
note left of Доставщик
  1. Как доставщик, я хочу получать уведомления о новых заказах, чтобы начать доставку вовремя.
  2. Как доставщик, я хочу видеть маршрут доставки, чтобы оптимально спланировать время и путь.
  3. Как доставщик, я хочу иметь возможность обновлять статус доставки, чтобы покупатель знал о ходе выполнения заказа.
  4. Как доставщик, я хочу получать данные о клиенте, чтобы успешно выполнить доставку по правильному адресу.
  5. Как доставщик, я хочу сообщать о завершении доставки, чтобы система могла обновить статус заказа.
end note

' Истории поставщика
note left of Поставщик
  1. Как поставщик, я хочу иметь возможность добавлять новые товары в каталог, чтобы расширить ассортимент.
  2. Как поставщик, я хочу видеть информацию о проданных товарах, чтобы планировать следующие поставки.
  3. Как поставщик, я хочу получать уведомления о поступивших заказах, чтобы вовремя подготовить товары для доставки.
  4. Как поставщик, я хочу отслеживать возвраты товаров, чтобы учитывать это при планировании новых поставок.
  5. Как поставщик, я хочу управлять ценами на свои товары, чтобы адаптироваться к изменениям на рынке.
end note

' Истории администратора
note left of Администратор
  1. Как администратор, я хочу управлять учетными записями пользователей, чтобы обеспечивать доступ и безопасность.
  2. Как администратор, я хочу отслеживать статус заказов, чтобы помогать покупателям с вопросами и проблемами.
  3. Как администратор, я хочу проверять и подтверждать возвраты товаров, чтобы поддерживать политику возврата компании.
  4. Как администратор, я хочу управлять правами доступа сотрудников, чтобы ограничивать или разрешать их действия в системе.
  5. Как администратор, я хочу просматривать отчеты о продажах и клиентах, чтобы принимать решения по улучшению работы магазина.
end note

' Истории владельца
note left of Владелец
  1. Как владелец, я хочу видеть отчеты о финансовых результатах магазина, чтобы анализировать прибыль и убытки.
  2. Как владелец, я хочу управлять стратегией маркетинга, чтобы привлекать больше покупателей и увеличивать продажи.
  3. Как владелец, я хочу принимать решения по крупным закупкам и инвестициям, чтобы обеспечить развитие бизнеса.
  4. Как владелец, я хочу управлять ассортиментом товаров, чтобы оптимизировать предложение на основе спроса.
  5. Как владелец, я хочу контролировать работу сотрудников, чтобы убедиться в эффективности и качестве работы магазина.
end note

Пользователь -> Website: Открывает сайт
Пользователь -> Website: Просматривает товары
Пользователь -> Website: Добавляет товар в корзину
Website -> Cart: Обновляет содержимое корзины

Пользователь -> Cart: Просматривает корзину
Пользователь -> Website: Оформляет заказ
Website -> Payment: Перенаправление на оплату
Payment -> Пользователь: Запрашивает данные карты
Пользователь -> Payment: Вводит данные карты
Payment -> Website: Подтверждение оплаты

Website -> Delivery: Отправка данных для доставки
Delivery -> Courier: Назначение доставщика
Courier -> Delivery: Подтверждение принятия заказа
Courier -> Пользователь: Оповещение о статусе доставки
Courier -> Delivery: Заказ доставлен
Delivery -> Пользователь: Подтверждение завершения доставки

...Позже...
Пользователь -> Return: Инициирует возврат товара
Return -> Пользователь: Подтверждение возврата

' Добавление классов, интерфейсов и наследования
package "Модели" {
  class Товар {
    - id: int
    - название: string
    - цена: float
    + getОписание(): string
    + getЦена(): float
  }
  class Корзина {
    - товары: List<Tовар>
    + добавитьТовар(товар: Товар): void
    + удалитьТовар(товар: Товар): void
    + очиститьКорзину(): void
  }
}

package "Платежная система" {
  interface ПлатежнаяСистема {
    + оплатить(сумма: float): boolean
  }
  class КредитнаяКарта implements ПлатежнаяСистема {
    + номерКарты: string
    + срокДействия: string
    + оплата(сумма: float): boolean
  }
  class PayPal implements ПлатежнаяСистема {
    + email: string
    + оплата(сумма: float): boolean
  }
}

package "Доставка" {
  abstract class Доставка {
    + рассчитатьСроки(): int
    + рассчитатьСтоимость(): float
  }
  class КурьерскаяДоставка extends Доставка {
    + рассчитатьСроки(): int
    + рассчитатьСтоимость(): float
  }
  class ПочтоваяДоставка extends Доставка {
    + рассчитатьСроки(): int
    + рассчитатьСтоимость(): float
  }
  class Доставщик {
    - id: int
    - имя: string
    + принятьЗаказ(заказ: Товар): void
    + обновитьСтатус(статус: string): void
  }
}

package "Возврат" {
  interface ПроцессВозврата {
    + инициироватьВозврат(): void
    + подтверждениеВозврата(): boolean
  }
  class ВозвратТовара implements ПроцессВозврата {
    + инициироватьВозврат(): void
    + подтверждениеВозврата(): boolean
  }
}

' Указание зависимости
Cart ..> Товар : содержит >
Пользователь --|> ВозвратТовара : инициирует >
Payment --> ПлатежнаяСистема : использует >
Delivery --> Доставка : использует >
Courier --> Доставка : работает с >

' Методы и доступ
Товар : - id : int
Товар : - название : string
Товар : - цена : float
Товар : + getОписание() : string
Товар : + getЦена() : float
Корзина : - товары : List<Tовар>
Корзина : + добавитьТовар(товар: Товар) : void
Корзина : + удалитьТовар(товар: Товар) : void
Корзина : + очиститьКорзину() : void

КредитнаяКарта : + номерКарты : string
КредитнаяКарта : + срокДействия : string
КредитнаяКарта : + оплатить(сумма: float) : boolean

PayPal : + email : string
PayPal : + оплата(сумма: float) : boolean

Доставка : + рассчитатьСроки() : int
Доставка : + рассчитатьСтоимость() : float

КурьерскаяДоставка : + рассчитатьСроки() : int
КурьерскаяДоставка : + рассчитатьСтоимость() : float

ПочтоваяДоставка : + рассчитатьСроки() : int
ПочтоваяДоставка : + рассчитатьСтоимость() : float

Доставщик : - id : int
Доставщик : - имя : string
Доставщик : + принятьЗаказ(заказ: Товар) : void
Доставщик : + обновитьСтатус(статус: string) : void

ВозвратТовара : + инициироватьВозврат() : void
ВозвратТовара : + подтверждениеВозврата() : boolean

' Примечания и шаблоны
note right of Пользователь
  Взаимодействие с сайтом
  и оформление заказа.
end note

note bottom of Корзина
  Добавление и удаление товаров
  из корзины покупок.
end note

@enduml
